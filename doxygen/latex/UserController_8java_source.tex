\doxysection{User\+Controller.\+java}
\hypertarget{UserController_8java_source}{}\label{UserController_8java_source}\index{user-\/auth-\/system/src/main/java/com/hikmethankolay/user\_auth\_system/controller/UserController.java@{user-\/auth-\/system/src/main/java/com/hikmethankolay/user\_auth\_system/controller/UserController.java}}
\mbox{\hyperlink{UserController_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00015}00015\ \textcolor{keyword}{package\ }com.hikmethankolay.user\_auth\_system.controller;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00017}00017\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.dto.ApiResponseDTO;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00018}00018\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.dto.UserInfoDTO;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00019}00019\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.dto.UserUpdateDTO;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00020}00020\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.entity.User;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00021}00021\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.enums.EApiStatus;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00022}00022\ \textcolor{keyword}{import}\ com.hikmethankolay.user\_auth\_system.service.UserService;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00023}00023\ \textcolor{keyword}{import}\ org.springframework.data.domain.Page;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00024}00024\ \textcolor{keyword}{import}\ org.springframework.data.domain.Pageable;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00025}00025\ \textcolor{keyword}{import}\ org.springframework.data.web.PageableDefault;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00026}00026\ \textcolor{keyword}{import}\ org.springframework.http.HttpStatus;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00027}00027\ \textcolor{keyword}{import}\ org.springframework.http.ResponseEntity;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00028}00028\ \textcolor{keyword}{import}\ org.springframework.web.bind.annotation.*;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00030}00030\ \textcolor{keyword}{import}\ java.util.HashSet;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00031}00031\ \textcolor{keyword}{import}\ java.util.Optional;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00032}00032\ \textcolor{keyword}{import}\ java.util.Set;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00033}00033\ \textcolor{keyword}{import}\ java.util.stream.Collectors;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00039}00039\ @RestController}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00040}00040\ @RequestMapping(\textcolor{stringliteral}{"{}/api"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00041}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController}{00041}}\ public\ class\ \mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController}{UserController}}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00044}00044\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ UserService\ userService;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00051}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a7e8f5e4e86c7f30dd7e301cfcdd215b8}{00051}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a7e8f5e4e86c7f30dd7e301cfcdd215b8}{UserController}}(UserService\ userService)\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00052}00052\ \ \ \ \ \ \ \ \ this.userService\ =\ userService;}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00053}00053\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00060}00060\ \ \ \ \ @GetMapping(\textcolor{stringliteral}{"{}/users"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00061}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a92a05c748a73348fa7643eab35e60592}{00061}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<Page<UserInfoDTO>>>\ getUsers(}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ @PageableDefault(page\ =\ 0,\ size\ =\ 10,\ sort\ =\ "{}\textcolor{keywordtype}{id}"{})\ Pageable\ pageable}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00063}00063\ \ \ \ \ )\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00064}00064\ \ \ \ \ \ \ \ \ Page<User>\ userPage\ =\ userService.findAll(pageable);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00065}00065\ \ \ \ \ \ \ \ \ Page<UserInfoDTO>\ dtoPage\ =\ userPage.map(UserInfoDTO::new);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ dtoPage,\ \textcolor{stringliteral}{"{}Users\ found\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00067}00067\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00074}00074\ \ \ \ \ @GetMapping(\textcolor{stringliteral}{"{}/users/\{id\}"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00075}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_aa4bc54801894ad6e3b2dcfb3d2a84f6b}{00075}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ getUserById(@PathVariable\ Long\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00076}00076\ \ \ \ \ \ \ \ \ Optional<User>\ user\ =\ userService.findById(\textcolor{keywordtype}{id});}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (user.isPresent())\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ UserInfoDTO\ userDTO\ =\ \textcolor{keyword}{new}\ UserInfoDTO(user.get());}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ userDTO,\ \textcolor{stringliteral}{"{}User\ found\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00080}00080\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.NOT\_FOUND)}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .body(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.FAILURE,\ \textcolor{keyword}{null},\ \textcolor{stringliteral}{"{}Could\ not\ find\ user\ with\ id:\ "{}}\ +\ \textcolor{keywordtype}{id}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00083}00083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00084}00084\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00091}00091\ \ \ \ \ @GetMapping(\textcolor{stringliteral}{"{}/users/me"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00092}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a4a9499a84b10b2e7f0467745c67e6b1d}{00092}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ getLoggedInUser(@RequestAttribute("{}userId"{})\ Long\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ getUserById(\textcolor{keywordtype}{id});}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00094}00094\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00101}00101\ \ \ \ \ @GetMapping(value\ =\ \textcolor{stringliteral}{"{}/users"{}},\ params\ =\ \textcolor{stringliteral}{"{}username"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00102}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a758a622a16b931f4ca4f5cc4b570df48}{00102}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ getUserByUsername(@RequestParam\ String\ username)\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00103}00103\ \ \ \ \ \ \ \ \ Optional<User>\ user\ =\ userService.findByUsernameOrEmail(username);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (user.isPresent())\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ UserInfoDTO\ userDTO\ =\ \textcolor{keyword}{new}\ UserInfoDTO(user.get());}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ userDTO,\ \textcolor{stringliteral}{"{}User\ found\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00107}00107\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.NOT\_FOUND)}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .body(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.FAILURE,\ \textcolor{keyword}{null},\ \textcolor{stringliteral}{"{}Could\ not\ find\ user\ with\ username:\ "{}}\ +\ username));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00110}00110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00111}00111\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00118}00118\ \ \ \ \ @GetMapping(value\ =\ \textcolor{stringliteral}{"{}/users"{}},\ params\ =\ \textcolor{stringliteral}{"{}email"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00119}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a8aa5f01c6f5ca6f5845824b67840e4c9}{00119}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ getUserByEmail(@RequestParam\ String\ email)\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00120}00120\ \ \ \ \ \ \ \ \ Optional<User>\ user\ =\ userService.findByUsernameOrEmail(email);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (user.isPresent())\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ UserInfoDTO\ userDTO\ =\ \textcolor{keyword}{new}\ UserInfoDTO(user.get());}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ userDTO,\ \textcolor{stringliteral}{"{}User\ found\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00124}00124\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.NOT\_FOUND)}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .body(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.FAILURE,\ \textcolor{keyword}{null},\ \textcolor{stringliteral}{"{}Could\ not\ find\ user\ with\ email:\ "{}}\ +\ email));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00127}00127\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00128}00128\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00136}00136\ \ \ \ \ @PatchMapping(\textcolor{stringliteral}{"{}/users/\{id\}"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00137}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_a6cef1662f88814a100546a47080bcf86}{00137}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ updateUser(@RequestBody\ UserUpdateDTO\ UserUpdateDTO,\ @PathVariable\ Long\ \textcolor{keywordtype}{id},\ @RequestAttribute("{}userId"{})\ Long\ requesterId)\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00138}00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ User\ updatedUser\ =\ userService.updateUser(UserUpdateDTO,\ \textcolor{keywordtype}{id},\ requesterId);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ \textcolor{keyword}{new}\ UserInfoDTO(updatedUser),\ \textcolor{stringliteral}{"{}User\ updated\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00141}00141\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00142}00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ e)\{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.BAD\_REQUEST).body(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.FAILURE,\ \textcolor{keyword}{null},\ e.getMessage()));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00144}00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00145}00145\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00153}00153\ \ \ \ \ @PatchMapping(\textcolor{stringliteral}{"{}/users/me"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00154}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_af0cfb025a647936f079eec50e8aa1396}{00154}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<UserInfoDTO>>\ updateLoggedInUser(@RequestBody\ UserUpdateDTO\ UserUpdateDTO,\ @RequestAttribute("{}userId"{})\ Long\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00155}00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ updateUser(UserUpdateDTO,\ \textcolor{keywordtype}{id},\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00156}00156\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00163}00163\ \ \ \ \ @DeleteMapping(\textcolor{stringliteral}{"{}/users/\{id\}"{}})}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00164}\mbox{\hyperlink{classcom_1_1hikmethankolay_1_1user__auth__system_1_1controller_1_1UserController_ac3825e720008b4023539a67188a109ee}{00164}}\ \ \ \ \ public\ ResponseEntity<ApiResponseDTO<Void>>\ deleteUser(@PathVariable\ Long\ \textcolor{keywordtype}{id},\ @RequestAttribute("{}userId"{})\ Long\ requesterId)\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00165}00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ userService.deleteById(\textcolor{keywordtype}{id},\ requesterId);}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.ok(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.SUCCESS,\ \textcolor{keyword}{null},\ \textcolor{stringliteral}{"{}User\ deleted\ successfully"{}}));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00168}00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00169}00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ e)\{}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ResponseEntity.status(HttpStatus.BAD\_REQUEST).body(\textcolor{keyword}{new}\ ApiResponseDTO<>(EApiStatus.FAILURE,\ \textcolor{keyword}{null},\ e.getMessage()));}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00171}00171\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00172}00172\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{UserController_8java_source_l00173}00173\ \}}

\end{DoxyCode}
